{% extends "base.html" %}
{% load url from future %}
{% load i18n %}
{% load translations %}
{% load authnames %}

{% block breadcrumbs %}
<li><a href="{% url 'profile' %}">{% trans "Your profile" %}</a></li>
{% endblock %}

{% block content %}

{% if form.errors or userform.errors or subscriptionform.errors %}
{% show_message "error" _("Please fix errors in the form.") %}
{% endif %}

<form method="post" action="{% url 'profile' %}">
{% csrf_token %}

<ul class="nav nav-pills">
<li class="active"><a data-toggle="pill" href="#preferences">{% trans "Preferences" %}</a></li>
<li><a data-toggle="pill" href="#subscriptions">{% trans "Subscriptions" %}</a></li>
<li><a data-toggle="pill" href="#account">{% trans "Account" %}</a></li>
<li><a data-toggle="pill" href="#auth">{% trans "Authentication" %}</a></li>
<li><a data-toggle="pill" href="#profile">{% trans "Profile" %}</a></li>
<li><a data-toggle="pill" href="#licenses">{% trans "Licenses" %}</a></li>
</ul>

<div class="tab-content">
<div class="tab-pane active" id="preferences">
<div class="row">
<div class="col-md-6">
<div class="panel panel-primary">
  <div class="panel-heading"><h4 class="panel-title">{% trans "Preferences" %}</h4></div>
  <div class="panel-body">
    <table>
    {{ form.as_table }}
    </table>
  </div>
</div>
</div>
<div class="col-md-6 hidden-xs">
<div class="panel panel-primary">
  <div class="panel-heading"><h4 class="panel-title">{% trans "Description" %}</h4></div>
  <div class="panel-body">
    <p>
      {% blocktrans %}Choose which languages you prefer to translate. These will be offered to you on the dashboard to have easier access to chosen translations.{% endblocktrans %}
    </p>
    <p>
      {% blocktrans %}The secondary languages are shown next to the source string when translating.{% endblocktrans %}
    </p>
  </div>
  <div class="panel-footer">
  <a class="btn btn-default" href="{% documentation 'user/profile' 'languages' %}">{% trans "Documentation" %}</a>
  </div>
</div>
</div>
</div>
</div>
<div class="tab-pane" id="subscriptions">
<div class="row">
<div class="col-md-6">
<div class="panel panel-primary">
  <div class="panel-heading"><h4 class="panel-title">{% trans "Subscriptions" %}</h4></div>
  <div class="panel-body">
<table>
{{ subscriptionform.as_table }}
</table>
  </div>
</div>
</div>
<div class="col-md-6 hidden-xs">
<div class="panel panel-primary">
  <div class="panel-heading"><h4 class="panel-title">{% trans "Description" %}</h4></div>
  <div class="panel-body">
    <p>{% trans "You will receive chosen notifications via email for all your languages." %}</p>
  </div>
  <div class="panel-footer">
  <a class="btn btn-default" href="{% documentation 'user/profile' 'subscriptions' %}">{% trans "Documentation" %}</a>
  </div>
</div>
</div>
</div>
</div>
<div class="tab-pane" id="account">
<div class="row">
<div class="col-md-6">
<div class="panel panel-primary">
  <div class="panel-heading"><h4 class="panel-title">{% trans "Account" %}</h4></div>
  <div class="panel-body">
<table>
{{ userform.as_table }}
</table>
  </div>
</div>
</div>
<div class="col-md-6 hidden-xs">
<div class="panel panel-primary">
  <div class="panel-heading"><h4 class="panel-title">{% trans "Description" %}</h4></div>
  <div class="panel-body">
    <p>{% trans "Your name and email will appear as author on Git commits." %}</p>
  </div>
  <div class="panel-footer">
  <a class="btn btn-default" href="{% documentation 'user/profile' %}">{% trans "Documentation" %}</a>
  </div>
</div>
</div>
</div>
</div>
<div class="tab-pane" id="auth">
<div class="row">
<div class="col-md-6">
<div class="panel panel-primary">
  <div class="panel-heading"><h4 class="panel-title">{% trans "Authentication" %}</h4></div>
  <div class="panel-body">

<p><a href="{% url 'password' %}" class="btn btn-default">{% if request.user.has_usable_password %}{% trans "Change password" %}{% else %}{% trans "Set password" %}{% endif %}</a></p>
</div>
</div>

<div class="panel panel-primary">
  <div class="panel-heading"><h4 class="panel-title">{% trans "Third party identities" %}</h4></div>
  <div class="panel-body">
<p>{% trans "You can manage third party identities which are associated to this account." %}</p>
<p>{% trans "Currently associated:" %}</p>
<table class="table table-condensed">
<thead>
<tr>
<th>{% trans "Identity" %}</th>
<th>{% trans "User ID" %}</th>
<th>{% trans "Action" %}</th>
</td>
</tr>
<tbody>
{% for assoc in associated %}
<tr>
<th>{% auth_name assoc.provider %}</th>
<td>{{ assoc.uid }}</th>
<td>
<a href="{% url 'social:disconnect_individual' assoc.provider assoc.id %}?next={% url 'profile' %}" class="disconnect btn btn-default">{% trans "Disconnect" %}</a>
</td>

</tr>
{% endfor %}
</tbody>
</table>

{% if new_backends %}
<p>{% trans "Add new association:" %}</p>
{% for name in new_backends %}
  <a class="btn btn-default" href="{% url 'social:begin' name %}?next={% url 'profile' %}">{% auth_name name %}</a>
{% endfor %}
{% endif %}
</div>
</div>


<div class="panel panel-danger">
  <div class="panel-heading"><h4 class="panel-title">{% trans "Removal" %}</h4></div>
  <div class="panel-body">

{% show_message 'warning' _('Removal of the account deletes all your private data.') %}
   </div>
   <div class="panel-footer">
    <a class="btn btn-default" href="{% url 'remove' %}">{% trans "Remove my account" %}</a>
   </div>
</div>

</div>
<div class="col-md-6 hidden-xs">
<div class="panel panel-primary">
  <div class="panel-heading"><h4 class="panel-title">{% trans "Description" %}</h4></div>
  <div class="panel-body">
    <p>{% trans "You can configure how you will log in on this site." %}</p>
  </div>
  <div class="panel-footer">
  <a class="btn btn-default" href="{% documentation 'user/profile' 'authentication' %}">{% trans "Documentation" %}</a>
  </div>
</div>
</div>
</div>

</div>
<div class="tab-pane" id="profile">
<div class="row">
<div class="col-md-6">
<div class="panel panel-primary">
  <div class="panel-heading"><h4 class="panel-title">{% trans "Your summary" %}</h4></div>
  <div class="panel-body">
{% with request.user as user %}
{% include 'user-activity.html' %}
{% endwith %}
<p>
{% url 'user_page' user=request.user.username as user_page%}
{% trans "Your public profile:" %}
<a href="{{ user_page }}">{{ user_page }}</a>
</p>
</div>
</div>

{% if enable_avatars %}
<div class="panel panel-primary">
  <div class="panel-heading"><h4 class="panel-title">{% trans "Your avatar" %}</h4></div>
  <div class="panel-body">
<p class="border"><img src="{% url 'user_avatar' user=request.user.username size=128 %}" /></p>
<p><a href="https://www.libravatar.org/">{% trans "Avatars are provided using libravatar." %}</a></p>
</div>
</div>
{% endif %}

</div>

<div class="col-md-6 hidden-xs">
<div class="panel panel-primary">
  <div class="panel-heading"><h4 class="panel-title">{% trans "Description" %}</h4></div>
  <div class="panel-body">
    <p>{% trans "Your public appearance on this site." %}</p>
  </div>
  <div class="panel-footer">
  <a class="btn btn-default" href="{% documentation 'user/profile' 'avatar' %}">{% trans "Documentation" %}</a>
  </div>
</div>
</div>

</div>

</div>

<div class="tab-pane" id="licenses">
<p>
{% trans "By registering you agree to use your name and email in Git commits and provide your contribution under license defined by each translated project." %}
</p>

{% if licenses %}
<p>{% trans "Following projects have explicitly specified their licensing and copyright conditions:" %}</p>
<dl>
{% for project in licenses %}
<dt><strong>{{ project.name }}</strong></dt>
<dd>
{% if project.license_url %}
<a href="{{ project.license_url }}">{{ project.license }}</a></p>
{% else %}
{{ project.license }}
{% endif %}
</dd>
{% endfor %}
</dl>
{% endif %}
</div>
</div>


<input type="submit" value="{% trans "Save" %}" class="btn btn-default" />
</form>
<form method="post" action="" id="disconnect-form">{% csrf_token %}</form>

{% endblock %}
